<div class="p-5 font-inter">
  <div class="w-full max-w-md mx-auto space-y-6">
    <!-- Filtro de Período -->
    <section class="w-full">
      <div class="flex items-center justify-between mb-3">
        <h2 class="text-base font-semibold text-black">Período</h2>
        <button
          *ngIf="periodoSelecionado !== PeriodoDashboard.MES_ATUAL"
          type="button"
          class="text-xs text-primary hover:underline"
          (click)="resetarPeriodo()"
        >
          Resetar
        </button>
      </div>
      <select
        [(ngModel)]="periodoSelecionado"
        (ngModelChange)="onPeriodoChange()"
        class="w-full h-12 rounded-xl border-2 border-primary/30 bg-white px-4 py-3 text-black outline-none focus:border-primary transition"
      >
        <option *ngFor="let periodo of periodos" [value]="periodo.value">
          {{ periodo.label }}
        </option>
      </select>
    </section>

    <!-- Card de saldo -->
    <section
      class="w-full rounded-xl bg-white px-5 py-4 shadow-sm border border-black/5"
    >
      <div class="flex items-center justify-between mb-3">
        <h2 class="text-base font-semibold text-black">Saldo atual</h2>
      </div>

      <div class="mb-3">
        <p
          class="text-4xl font-bold"
          [ngClass]="saldoAtual >= 0 ? 'text-success' : 'text-error'"
        >
          {{ saldoAtual | currency : "BRL" : "symbol" : "1.2-2" : "pt" }}
        </p>
      </div>
    </section>

    <!-- Cards de Receitas e Despesas -->
    <section class="grid grid-cols-2 gap-4">
      <div
        class="rounded-xl bg-white px-4 py-3 shadow-sm border border-black/5"
      >
        <div class="text-xs text-description mb-1">Total de Receitas</div>
        <div class="text-2xl font-bold text-success">
          {{ totalReceitas | currency : "BRL" : "symbol" : "1.0-0" : "pt" }}
        </div>
      </div>
      <div
        class="rounded-xl bg-white px-4 py-3 shadow-sm border border-black/5"
      >
        <div class="text-xs text-description mb-1">Total de Despesas</div>
        <div class="text-2xl font-bold text-error">
          {{ totalDespesas | currency : "BRL" : "symbol" : "1.0-0" : "pt" }}
        </div>
      </div>
    </section>

    <!-- Gráficos de Pizza -->
    <section
      *ngIf="receitasChartData.length > 0 || despesasChartData.length > 0"
      class="grid grid-cols-2 gap-4"
    >
      <div
        *ngIf="receitasChartData.length > 0"
        class="rounded-xl bg-white px-4 py-4 shadow-sm border border-black/5"
      >
        <app-pie-chart
          [data]="receitasChartData"
          [title]="'Receitas'"
          [size]="120"
        ></app-pie-chart>
      </div>
      <div
        *ngIf="despesasChartData.length > 0"
        class="rounded-xl bg-white px-4 py-4 shadow-sm border border-black/5"
      >
        <app-pie-chart
          [data]="despesasChartData"
          [title]="'Despesas'"
          [size]="120"
        ></app-pie-chart>
      </div>
    </section>

    <!-- Gastos por Categoria -->
    <section
      *ngIf="dashboardData && dashboardData.gastosPorCategoria.length > 0"
      class="rounded-xl bg-white px-5 py-4 shadow-sm border border-black/5"
    >
      <app-category-chart
        [gastos]="dashboardData.gastosPorCategoria"
        [title]="'Gastos por Categoria'"
      ></app-category-chart>
    </section>

    <!-- Resumo de Metas -->
    <section
      *ngIf="dashboardData && dashboardData.metas.length > 0"
      class="rounded-xl bg-white px-5 py-4 shadow-sm border border-black/5"
    >
      <app-metas-summary
        [metas]="dashboardData.metas"
        [title]="'Metas'"
      ></app-metas-summary>
    </section>

    <!-- Acesso às transações recorrentes -->
    <section class="w-full mt-4">
      <a
        [routerLink]="['/recorrentes']"
        class="flex items-center justify-between rounded-xl bg-primary pl-6 pr-2 py-4 shadow-sm hover:shadow-md transition border border-black/5"
      >
        <div class="flex">
          <span class="font-semibold text-white"> Transações recorrentes </span>
        </div>
        <mat-icon class="text-base text-white">arrow_forward_ios</mat-icon>
      </a>
    </section>

    <!-- Botão Gerar Relatório -->
    <section class="w-full mt-4">
      <button
        type="button"
        class="w-full flex items-center justify-center gap-2 rounded-xl bg-white pl-6 pr-6 py-4 shadow-sm hover:shadow-md transition border border-primary text-primary font-semibold active:scale-95"
        (click)="openRelatorioModal()"
      >
        <mat-icon class="text-base">description</mat-icon>
        Gerar Relatório
      </button>
    </section>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-8 text-description text-sm">
      Carregando dados...
    </div>
  </div>

  <!-- Modal de Relatório -->
  <app-relatorio-modal
    [open]="isRelatorioModalOpen"
    (close)="handleRelatorioModalClose()"
    (confirm)="handleRelatorioModalConfirm($event)"
  ></app-relatorio-modal>
</div>
