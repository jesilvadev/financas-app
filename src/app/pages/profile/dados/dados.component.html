<div class="pb-14 font-inter h-full flex flex-col">
  <!-- Header fixo (padrão recorrentes/notificações) -->
  <header
    class="flex items-center justify-center pb-2 py-12 sticky top-0 z-10 bg-primary"
    aria-label="Cabeçalho de dados pessoais"
  >
    <button
      type="button"
      class="absolute left-0 px-3 py-1 rounded-full transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40"
      routerLink="/profile"
      aria-label="Voltar"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="#ffffff"
      >
        <path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
      </svg>
    </button>
    <h1 class="text-lg font-semibold text-white text-center truncate">
      Dados pessoais
    </h1>
  </header>

  <div class="mt-6 grid gap-3 px-6">
    <div>
      <label class="text-sm text-description mb-1 block">Nome</label>
      <app-ui-input
        [placeholder]="'Seu nome completo'"
        [(ngModel)]="nome"
        [disabled]="loading || saving || !isEditing"
      ></app-ui-input>
    </div>

    <div>
      <label class="text-sm text-description mb-1 block">E-mail</label>
      <app-ui-input
        [type]="'email'"
        [placeholder]="'seu@email.com'"
        [(ngModel)]="email"
        [disabled]="loading || saving || !isEditing"
        [autocomplete]="'email'"
      ></app-ui-input>
    </div>

    <ng-container *ngIf="!isEditing; else editingActions">
      <div class="mt-4">
        <app-button-primary
          label="Editar"
          [disabled]="loading || saving"
          (clicked)="editar()"
        ></app-button-primary>
      </div>
    </ng-container>

    <ng-template #editingActions>
      <div class="mt-4 grid grid-cols-2 gap-3">
        <button
          type="button"
          class="h-[63px] w-full items-center justify-center rounded-xl bg-white px-6 text-base font-medium text-primary transition hover:bg-black/[0.03] active:scale-95 disabled:pointer-events-none disabled:opacity-50 border border-black/5"
          [disabled]="saving"
          (click)="cancelar()"
        >
          Cancelar
        </button>
        <app-button-primary
          [label]="saving ? 'Salvando...' : 'Salvar'"
          [loading]="saving"
          [disabled]="!canSave"
          (clicked)="openConfirmModal()"
        ></app-button-primary>
      </div>
    </ng-template>
  </div>

  <!-- Modal confirmar atualização de dados -->
  <app-confirm-modal
    [open]="isConfirmModalOpen"
    [title]="'Confirmar alteração de dados'"
    [description]="'Tem certeza que deseja atualizar seus dados pessoais?'"
    [confirmLabel]="'Sim, atualizar'"
    [cancelLabel]="'Cancelar'"
    [confirming]="saving"
    (close)="closeConfirmModal()"
    (confirm)="salvar()"
  ></app-confirm-modal>
</div>
