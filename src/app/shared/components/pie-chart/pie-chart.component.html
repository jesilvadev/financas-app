<div class="flex flex-col items-center gap-3">
  <h3 class="text-sm font-semibold text-gray-700" *ngIf="title">{{ title }}</h3>

  <div class="relative" [style.width.px]="size" [style.height.px]="size">
    <svg [attr.width]="size" [attr.height]="size" class="transform -rotate-90">
      <g *ngFor="let item of data; let i = index">
        <path
          [attr.d]="getPath(i)"
          [attr.fill]="item.color"
          [attr.stroke]="'white'"
          [attr.stroke-width]="2"
          class="transition-opacity hover:opacity-80"
        />
      </g>
    </svg>

    <!-- Centro com total -->
    <div
      class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none"
    >
      <span class="text-lg font-bold text text-gray-900">
        {{ total | currency : "BRL" : "symbol" : "1.0-0" : "pt" }}
      </span>
    </div>
  </div>

  <!-- Legenda -->
  <div class="w-full space-y-2 mt-2">
    <div
      *ngFor="let item of data"
      class="flex items-center justify-between text-xs"
    >
      <div class="flex items-center gap-2">
        <div
          class="w-3 h-3 rounded-full"
          [style.background-color]="item.color"
        ></div>
        <span class="text-gray-700 truncate max-w-[120px]">{{
          item.label
        }}</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="text-gray-600">
          {{ getPercentage(item.value) | number : "1.0-0" }}%
        </span>
        <span class="text-gray-900 font-semibold">
          {{ item.value | currency : "BRL" : "symbol" : "1.0-0" : "pt" }}
        </span>
      </div>
    </div>
  </div>
</div>
